{"ast":null,"code":"var _jsxFileName = \"F:\\\\D3\\\\2019\\u6D59\\u5927\\u6691\\u671F\\u5B66\\u4E60\\\\SummerCourse2019-master\\\\SummerCourse2019-master\\\\vis\\\\src\\\\graph.jsx\";\nimport React, { Component } from \"react\";\nimport * as d3 from \"d3\";\n\nclass Graph extends Component {\n  componentWillReceiveProps(props) {\n    const graph = props.graph;\n    const graphSVG = d3.select(\"#graph\");\n    const padding = 100;\n    const width = graphSVG.node().parentNode.clientWidth;\n    graphSVG.attr(\"width\", width).attr(\"height\", width);\n    const simulation = d3.forceSimulation().force(\"link\", d3.forceLink().id(function (d) {\n      return d.id;\n    })).force(\"charge\", d3.forceManyBody()).force(\"center\", d3.forceCenter(width / 2, width / 2));\n    simulation.nodes(graph.nodes).on(\"tick\", ticked);\n    console.log(graph);\n    simulation.force(\"link\").links(graph.links);\n    const link = graphSVG.append(\"g\").attr(\"class\", \"links\").selectAll(\"line\").data(graph.links).enter().append(\"line\").attr(\"stroke\", \"#d9dde2\");\n    const node = graphSVG.append(\"g\").attr(\"class\", \"nodes\").selectAll(\"circle\").data(graph.nodes).enter().append(\"circle\").attr(\"r\", 5);\n\n    function ticked() {\n      let max = {};\n      let min = {};\n      max.x = d3.max(graph.nodes, n => n.x);\n      max.y = d3.max(graph.nodes, n => n.y);\n      min.x = d3.min(graph.nodes, n => n.x);\n      min.y = d3.min(graph.nodes, n => n.y);\n      const xScale = d3.scaleLinear().domain([min.x, max.x]).range([padding, width - padding]);\n      const yScale = d3.scaleLinear().domain([min.y, max.y]).range([padding, width - padding]);\n      link.attr(\"x1\", function (d) {\n        return xScale(d.source.x);\n      }).attr(\"y1\", function (d) {\n        return yScale(d.source.y);\n      }).attr(\"x2\", function (d) {\n        return xScale(d.target.x);\n      }).attr(\"y2\", function (d) {\n        return yScale(d.target.y);\n      });\n      node.attr(\"cx\", function (d) {\n        return xScale(d.x);\n      }).attr(\"cy\", function (d) {\n        return yScale(d.y); //console.log(d.x,d.y)\n      }).attr(\"fill\", \"#FFD700\");\n    }\n  }\n\n  render() {\n    return React.createElement(\"svg\", {\n      id: \"graph\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default Graph;","map":{"version":3,"sources":["F:\\D3\\2019浙大暑期学习\\SummerCourse2019-master\\SummerCourse2019-master\\vis\\src\\graph.jsx"],"names":["React","Component","d3","Graph","componentWillReceiveProps","props","graph","graphSVG","select","padding","width","node","parentNode","clientWidth","attr","simulation","forceSimulation","force","forceLink","id","d","forceManyBody","forceCenter","nodes","on","ticked","console","log","links","link","append","selectAll","data","enter","max","min","x","n","y","xScale","scaleLinear","domain","range","yScale","source","target","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\"\nimport * as d3 from \"d3\"\n\nclass Graph extends Component {\n    componentWillReceiveProps(props) {\n        const graph = props.graph\n        const graphSVG = d3.select(\"#graph\")\n        const padding = 100\n        const width = graphSVG.node().parentNode.clientWidth\n        graphSVG.attr(\"width\", width).attr(\"height\", width)\n        const simulation = d3\n            .forceSimulation()\n            .force(\n                \"link\",\n                d3.forceLink().id(function(d) {\n                    return d.id\n                })\n            )\n            .force(\"charge\", d3.forceManyBody())\n            .force(\"center\", d3.forceCenter(width / 2, width / 2))\n\n        simulation.nodes(graph.nodes).on(\"tick\", ticked)\n        console.log(graph)\n        simulation.force(\"link\").links(graph.links)\n        const link = graphSVG\n            .append(\"g\")\n            .attr(\"class\", \"links\")\n            .selectAll(\"line\")\n            .data(graph.links)\n            .enter()\n            .append(\"line\")\n            .attr(\"stroke\", \"#d9dde2\")\n        const node = graphSVG\n            .append(\"g\")\n            .attr(\"class\", \"nodes\")\n            .selectAll(\"circle\")\n            .data(graph.nodes)\n            .enter()\n            .append(\"circle\")\n            .attr(\"r\", 5)\n        function ticked() {\n            let max = {}\n            let min = {}\n            max.x = d3.max(graph.nodes, n => n.x)\n            max.y = d3.max(graph.nodes, n => n.y)\n            min.x = d3.min(graph.nodes, n => n.x)\n            min.y = d3.min(graph.nodes, n => n.y)\n            const xScale = d3\n                .scaleLinear()\n                .domain([min.x, max.x])\n                .range([padding, width - padding])\n            const yScale = d3\n                .scaleLinear()\n                .domain([min.y, max.y])\n                .range([padding, width - padding])\n            link.attr(\"x1\", function(d) {\n                return xScale(d.source.x)\n            })\n                .attr(\"y1\", function(d) {\n                    return yScale(d.source.y)\n                })\n                .attr(\"x2\", function(d) {\n                    return xScale(d.target.x)\n                })\n                .attr(\"y2\", function(d) {\n                    return yScale(d.target.y)\n                })\n            node.attr(\"cx\", function(d) {\n                return xScale(d.x)\n            }).attr(\"cy\", function(d) {\n                return yScale(d.y)\n                //console.log(d.x,d.y)\n            }).attr(\"fill\",\"#FFD700\")\n        }\n    }\n    render() {\n        return <svg id=\"graph\" />\n    }\n}\n\nexport default Graph\n"]},"metadata":{},"sourceType":"module"}