{"ast":null,"code":"var _jsxFileName = \"F:\\\\D3\\\\2019\\u6D59\\u5927\\u6691\\u671F\\u5B66\\u4E60\\\\SummerCourse2019-master\\\\SummerCourse2019-master\\\\vis\\\\src\\\\graph.jsx\";\nimport React, { Component } from \"react\";\nimport * as d3 from \"d3\";\n\nclass Graph extends Component {\n  componentWillReceiveProps(props) {\n    const graph = props.graph;\n    const graphSVG = d3.select(\"#graph\");\n    const padding = 100;\n    const width = graphSVG.node().parentNode.clientWidth;\n    graphSVG.attr(\"width\", width).attr(\"height\", width).append(\"rect\").attr(\"x\", 50).attr(\"y\", 50).attr(\"width\", 18).attr(\"height\", 18).attr(\"fill\", \"#FFD700\");\n    graphSVG.append(\"text\").text(\"MP*1\").attr(\"x\", 75).attr(\"y\", 65).attr(\"font-size\", 20);\n    graphSVG.append(\"rect\").attr(\"x\", 180).attr(\"y\", 50).attr(\"width\", 18).attr(\"height\", 18).attr(\"fill\", \"#FF0000\");\n    graphSVG.append(\"text\").text(\"MP*2\").attr(\"x\", 205).attr(\"y\", 65).attr(\"font-size\", 20);\n    graphSVG.append(\"rect\").attr(\"x\", 310).attr(\"y\", 50).attr(\"width\", 18).attr(\"height\", 18).attr(\"fill\", \"#080808\");\n    graphSVG.append(\"text\").text(\"PC\").attr(\"x\", 335).attr(\"y\", 65).attr(\"font-size\", 20);\n    graphSVG.append(\"rect\").attr(\"x\", 440).attr(\"y\", 50).attr(\"width\", 18).attr(\"height\", 18).attr(\"fill\", \"#0000CD\");\n    graphSVG.append(\"text\").text(\"PC*\").attr(\"x\", 465).attr(\"y\", 65).attr(\"font-size\", 20);\n    graphSVG.append(\"rect\").attr(\"x\", 570).attr(\"y\", 50).attr(\"width\", 18).attr(\"height\", 18).attr(\"fill\", \"#00CD00\");\n    graphSVG.append(\"text\").text(\"PSI*\").attr(\"x\", 595).attr(\"y\", 65).attr(\"font-size\", 20);\n    const simulation = d3.forceSimulation().force(\"link\", d3.forceLink().id(function (d) {\n      return d.id;\n    })).force(\"charge\", d3.forceManyBody()).force(\"center\", d3.forceCenter(width / 2, width / 2));\n    simulation.nodes(graph.nodes).on(\"tick\", ticked);\n    console.log(graph);\n    simulation.force(\"link\").links(graph.links);\n    const link = graphSVG.append(\"g\").attr(\"class\", \"links\").selectAll(\"line\").data(graph.links).enter().append(\"line\").attr(\"stroke\", \"#d9dde2\").attr(\"stroke-width\", function (data, i) {\n      if (data.weight > 8) {\n        return data.weight + \"px\";\n      } else {\n        return data.weight + \"px\";\n      }\n    });\n    const node = graphSVG.append(\"g\").attr(\"class\", \"nodes\").selectAll(\"circle\").data(graph.nodes).enter().append(\"circle\").attr(\"r\", 8);\n\n    function ticked() {\n      let max = {};\n      let min = {};\n      max.x = d3.max(graph.nodes, n => n.x);\n      max.y = d3.max(graph.nodes, n => n.y);\n      min.x = d3.min(graph.nodes, n => n.x);\n      min.y = d3.min(graph.nodes, n => n.y);\n      const xScale = d3.scaleLinear().domain([min.x, max.x]).range([padding, width - padding]);\n      const yScale = d3.scaleLinear().domain([min.y, max.y]).range([padding, width - padding]);\n      link.attr(\"x1\", function (d) {\n        return xScale(d.source.x);\n      }).attr(\"y1\", function (d) {\n        return yScale(d.source.y);\n      }).attr(\"x2\", function (d) {\n        return xScale(d.target.x);\n      }).attr(\"y2\", function (d) {\n        return yScale(d.target.y);\n      });\n      node.attr(\"cx\", function (d) {\n        return xScale(d.x);\n      }).attr(\"cy\", function (d) {\n        return yScale(d.y); //console.log(d.x,d.y)\n      }).attr(\"fill\", function (data, i) {\n        if (data.class == \"MP*1\") {\n          return \"#FFD700\";\n        }\n\n        if (data.class == \"MP*2\") {\n          return \"#FF0000\";\n        }\n\n        if (data.class == \"PC\") {\n          return \"#080808\";\n        }\n\n        if (data.class == \"PC*\") {\n          return \"#0000CD\";\n        }\n\n        if (data.class == \"PSI*\") {\n          return \"#00CD00\";\n        }\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(\"svg\", {\n      id: \"graph\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default Graph;","map":{"version":3,"sources":["F:\\D3\\2019浙大暑期学习\\SummerCourse2019-master\\SummerCourse2019-master\\vis\\src\\graph.jsx"],"names":["React","Component","d3","Graph","componentWillReceiveProps","props","graph","graphSVG","select","padding","width","node","parentNode","clientWidth","attr","append","text","simulation","forceSimulation","force","forceLink","id","d","forceManyBody","forceCenter","nodes","on","ticked","console","log","links","link","selectAll","data","enter","i","weight","max","min","x","n","y","xScale","scaleLinear","domain","range","yScale","source","target","class","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\"\nimport * as d3 from \"d3\"\n\nclass Graph extends Component {\n    componentWillReceiveProps(props) {\n        const graph = props.graph\n        const graphSVG = d3.select(\"#graph\")\n        const padding = 100\n        const width = graphSVG.node().parentNode.clientWidth\n        graphSVG.attr(\"width\", width).attr(\"height\", width)\n        .append(\"rect\")\n            .attr(\"x\",50)\n            .attr(\"y\",50)\n            .attr(\"width\",18)\n            .attr(\"height\",18)\n            .attr(\"fill\",\"#FFD700\")\n        graphSVG.append(\"text\")\n            .text(\"MP*1\")\n            .attr(\"x\",75)\n            .attr(\"y\",65)\n            .attr(\"font-size\",20)\n        graphSVG.append(\"rect\")\n            .attr(\"x\",180)\n            .attr(\"y\",50)\n            .attr(\"width\",18)\n            .attr(\"height\",18)\n            .attr(\"fill\",\"#FF0000\")\n        graphSVG.append(\"text\")\n            .text(\"MP*2\")\n            .attr(\"x\",205)\n            .attr(\"y\",65)\n            .attr(\"font-size\",20)\n        graphSVG.append(\"rect\")\n            .attr(\"x\",310)\n            .attr(\"y\",50)\n            .attr(\"width\",18)\n            .attr(\"height\",18)\n            .attr(\"fill\",\"#080808\")\n        graphSVG.append(\"text\")\n            .text(\"PC\")\n            .attr(\"x\",335)\n            .attr(\"y\",65)\n            .attr(\"font-size\",20)\n        graphSVG.append(\"rect\")\n            .attr(\"x\",440)\n            .attr(\"y\",50)\n            .attr(\"width\",18)\n            .attr(\"height\",18)\n            .attr(\"fill\",\"#0000CD\")\n        graphSVG.append(\"text\")\n            .text(\"PC*\")\n            .attr(\"x\",465)\n            .attr(\"y\",65)\n            .attr(\"font-size\",20)\n        graphSVG.append(\"rect\")\n            .attr(\"x\",570)\n            .attr(\"y\",50)\n            .attr(\"width\",18)\n            .attr(\"height\",18)\n            .attr(\"fill\",\"#00CD00\")\n        graphSVG.append(\"text\")\n            .text(\"PSI*\")\n            .attr(\"x\",595)\n            .attr(\"y\",65)\n            .attr(\"font-size\",20)\n\n        const simulation = d3\n            .forceSimulation()\n            .force(\n                \"link\",\n                d3.forceLink().id(function(d) {\n                    return d.id\n                })\n            )\n            .force(\"charge\", d3.forceManyBody())\n            .force(\"center\", d3.forceCenter(width / 2, width / 2))\n\n        simulation.nodes(graph.nodes).on(\"tick\", ticked)\n        console.log(graph)\n        simulation.force(\"link\").links(graph.links)\n        const link = graphSVG\n            .append(\"g\")\n            .attr(\"class\", \"links\")\n            .selectAll(\"line\")\n            .data(graph.links)\n            .enter()\n            .append(\"line\")\n            .attr(\"stroke\", \"#d9dde2\")\n            .attr(\"stroke-width\", function(data,i){\n                if(data.weight>8){\n                    return data.weight+\"px\"}\n                else{\n                    return data.weight+\"px\"\n                }\n            });\n        const node = graphSVG\n            .append(\"g\")\n            .attr(\"class\", \"nodes\")\n            .selectAll(\"circle\")\n            .data(graph.nodes)\n            .enter()\n            .append(\"circle\")\n            .attr(\"r\", 8)\n        function ticked() {\n            let max = {}\n            let min = {}\n            max.x = d3.max(graph.nodes, n => n.x)\n            max.y = d3.max(graph.nodes, n => n.y)\n            min.x = d3.min(graph.nodes, n => n.x)\n            min.y = d3.min(graph.nodes, n => n.y)\n            const xScale = d3\n                .scaleLinear()\n                .domain([min.x, max.x])\n                .range([padding, width - padding])\n            const yScale = d3\n                .scaleLinear()\n                .domain([min.y, max.y])\n                .range([padding, width - padding])\n            link.attr(\"x1\", function(d) {\n                return xScale(d.source.x)\n            })\n                .attr(\"y1\", function(d) {\n                    return yScale(d.source.y)\n                })\n                .attr(\"x2\", function(d) {\n                    return xScale(d.target.x)\n                })\n                .attr(\"y2\", function(d) {\n                    return yScale(d.target.y)\n                })\n            node.attr(\"cx\", function(d) {\n                return xScale(d.x)\n            }).attr(\"cy\", function(d) {\n                return yScale(d.y)\n                //console.log(d.x,d.y)\n            }).attr(\"fill\",function(data,i){\n                if(data.class==\"MP*1\"){\n                    return \"#FFD700\"\n                }\n                if(data.class==\"MP*2\"){\n                    return \"#FF0000\"\n                }\n                if(data.class==\"PC\"){\n                    return \"#080808\"\n                }\n                if(data.class==\"PC*\"){\n                    return \"#0000CD\"\n                }\n                if(data.class==\"PSI*\"){\n                    return \"#00CD00\"\n                }\n            })\n        }\n        \n    }\n    render() {\n        return (\n        <svg id=\"graph\" />\n        )\n       \n    }\n}\n\nexport default Graph\n"]},"metadata":{},"sourceType":"module"}