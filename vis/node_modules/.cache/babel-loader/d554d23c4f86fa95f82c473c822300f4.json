{"ast":null,"code":"var _jsxFileName = \"F:\\\\D3\\\\2019\\u6D59\\u5927\\u6691\\u671F\\u5B66\\u4E60\\\\SummerCourse2019-master\\\\SummerCourse2019-master\\\\vis\\\\src\\\\graph.jsx\";\nimport React, { Component } from \"react\";\nimport * as d3 from \"d3\";\n\nclass Graph extends Component {\n  componentWillReceiveProps(props) {\n    const graph = props.graph;\n    const graphSVG = d3.select(\"#graph\");\n    const padding = 100;\n    const width = graphSVG.node().parentNode.clientWidth;\n    graphSVG.attr(\"width\", width).attr(\"height\", width).append(\"rect\").attr(\"x\", 50).attr(\"y\", 50).attr(\"width\", 150).attr(\"height\", 15);\n    const simulation = d3.forceSimulation().force(\"link\", d3.forceLink().id(function (d) {\n      return d.id;\n    })).force(\"charge\", d3.forceManyBody()).force(\"center\", d3.forceCenter(width / 2, width / 2));\n    simulation.nodes(graph.nodes).on(\"tick\", ticked);\n    console.log(graph);\n    simulation.force(\"link\").links(graph.links);\n    const link = graphSVG.append(\"g\").attr(\"class\", \"links\").selectAll(\"line\").data(graph.links).enter().append(\"line\").attr(\"stroke\", \"#d9dde2\");\n    const node = graphSVG.append(\"g\").attr(\"class\", \"nodes\").selectAll(\"circle\").data(graph.nodes).enter().append(\"circle\").attr(\"r\", 5);\n\n    function ticked() {\n      let max = {};\n      let min = {};\n      max.x = d3.max(graph.nodes, n => n.x);\n      max.y = d3.max(graph.nodes, n => n.y);\n      min.x = d3.min(graph.nodes, n => n.x);\n      min.y = d3.min(graph.nodes, n => n.y);\n      const xScale = d3.scaleLinear().domain([min.x, max.x]).range([padding, width - padding]);\n      const yScale = d3.scaleLinear().domain([min.y, max.y]).range([padding, width - padding]);\n      link.attr(\"x1\", function (d) {\n        return xScale(d.source.x);\n      }).attr(\"y1\", function (d) {\n        return yScale(d.source.y);\n      }).attr(\"x2\", function (d) {\n        return xScale(d.target.x);\n      }).attr(\"y2\", function (d) {\n        return yScale(d.target.y);\n      });\n      node.attr(\"cx\", function (d) {\n        return xScale(d.x);\n      }).attr(\"cy\", function (d) {\n        return yScale(d.y); //console.log(d.x,d.y)\n      }).attr(\"fill\", function (data, i) {\n        if (i < 25) {\n          return \"#FFD700\";\n        }\n\n        if (i >= 25 && i < 50) {\n          return \"#FF0000\";\n        }\n\n        if (i >= 50 && i < 100) {\n          return \"#98FB98\";\n        }\n\n        if (i >= 100) {\n          return \"#68228B\";\n        }\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(\"svg\", {\n      id: \"graph\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default Graph;","map":{"version":3,"sources":["F:\\D3\\2019浙大暑期学习\\SummerCourse2019-master\\SummerCourse2019-master\\vis\\src\\graph.jsx"],"names":["React","Component","d3","Graph","componentWillReceiveProps","props","graph","graphSVG","select","padding","width","node","parentNode","clientWidth","attr","append","simulation","forceSimulation","force","forceLink","id","d","forceManyBody","forceCenter","nodes","on","ticked","console","log","links","link","selectAll","data","enter","max","min","x","n","y","xScale","scaleLinear","domain","range","yScale","source","target","i","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\"\nimport * as d3 from \"d3\"\n\nclass Graph extends Component {\n    componentWillReceiveProps(props) {\n        const graph = props.graph\n        const graphSVG = d3.select(\"#graph\")\n        const padding = 100\n        const width = graphSVG.node().parentNode.clientWidth\n        graphSVG.attr(\"width\", width).attr(\"height\", width)\n        .append(\"rect\")\n        .attr(\"x\",50)\n        .attr(\"y\",50)\n        .attr(\"width\",150)\n        .attr(\"height\",15)\n\n        const simulation = d3\n            .forceSimulation()\n            .force(\n                \"link\",\n                d3.forceLink().id(function(d) {\n                    return d.id\n                })\n            )\n            .force(\"charge\", d3.forceManyBody())\n            .force(\"center\", d3.forceCenter(width / 2, width / 2))\n\n        simulation.nodes(graph.nodes).on(\"tick\", ticked)\n        console.log(graph)\n        simulation.force(\"link\").links(graph.links)\n        const link = graphSVG\n            .append(\"g\")\n            .attr(\"class\", \"links\")\n            .selectAll(\"line\")\n            .data(graph.links)\n            .enter()\n            .append(\"line\")\n            .attr(\"stroke\", \"#d9dde2\")\n        const node = graphSVG\n            .append(\"g\")\n            .attr(\"class\", \"nodes\")\n            .selectAll(\"circle\")\n            .data(graph.nodes)\n            .enter()\n            .append(\"circle\")\n            .attr(\"r\", 5)\n        function ticked() {\n            let max = {}\n            let min = {}\n            max.x = d3.max(graph.nodes, n => n.x)\n            max.y = d3.max(graph.nodes, n => n.y)\n            min.x = d3.min(graph.nodes, n => n.x)\n            min.y = d3.min(graph.nodes, n => n.y)\n            const xScale = d3\n                .scaleLinear()\n                .domain([min.x, max.x])\n                .range([padding, width - padding])\n            const yScale = d3\n                .scaleLinear()\n                .domain([min.y, max.y])\n                .range([padding, width - padding])\n            link.attr(\"x1\", function(d) {\n                return xScale(d.source.x)\n            })\n                .attr(\"y1\", function(d) {\n                    return yScale(d.source.y)\n                })\n                .attr(\"x2\", function(d) {\n                    return xScale(d.target.x)\n                })\n                .attr(\"y2\", function(d) {\n                    return yScale(d.target.y)\n                })\n            node.attr(\"cx\", function(d) {\n                return xScale(d.x)\n            }).attr(\"cy\", function(d) {\n                return yScale(d.y)\n                //console.log(d.x,d.y)\n            }).attr(\"fill\",function(data,i){\n                if(i<25){\n                    return \"#FFD700\"\n                }\n                if(i>=25&&i<50){\n                    return \"#FF0000\"\n                }\n                if(i>=50&&i<100){\n                    return \"#98FB98\"\n                }\n                if(i>=100){\n                    return \"#68228B\"\n                }\n            })\n        }\n        \n    }\n    render() {\n        return <svg id=\"graph\" />\n    }\n}\n\nexport default Graph\n"]},"metadata":{},"sourceType":"module"}